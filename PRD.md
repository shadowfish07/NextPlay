# NextPlay - 产品需求文档 (PRD)

## 产品概述

### 产品定位

一款基于 Steam 游戏库的智能游戏推荐应用，通过连接用户的 Steam 账户，帮助用户从庞大的游戏库中智能推荐下一款值得游玩的游戏，解决玩家的"选择困难症"。

### 目标用户

- 拥有大量 Steam 游戏但不知道玩什么的玩家
- 希望更好管理游戏库和游玩状态的用户
- 寻找特定类型游戏或游戏代餐的玩家

### 核心价值

- **智能推荐**：基于游戏状态、类型平衡、用户偏好的个性化推荐
- **状态管理**：简化游戏库管理，清晰追踪游玩进度
- **纯本地化**：无需后端服务，数据完全存储在本地，保护用户隐私

## 功能需求

### 1. 核心功能 - 游戏推荐

#### 1.1 随机推荐

- **主推荐**：大卡片展示单个推荐游戏
- **备选推荐**：3-4 个小卡片的横向滚动列表
- **推荐算法**：
  - 优先推荐"未开始"和"游玩中"状态的游戏
  - 游戏类型平衡：避免连续推荐同类型游戏
  - 支持时间预算筛选（短/中/长游戏）
  - 支持心情匹配（轻松/挑战/思考/社交）

#### 1.2 代餐推荐

- 用户输入想要的游戏类型或具体游戏名
- 从库中筛选相似标签/类型的未玩游戏
- 结合 Steam 相似游戏数据进行匹配

#### 1.3 筛选推荐

- 按游戏时长筛选：<5 小时 / 5-20 小时 / >20 小时
- 按游戏类型筛选：RPG、动作、独立游戏等
- 按当前可用时间筛选：30 分钟 / 1-2 小时 / 3 小时+ / 整个周末

### 2. 游戏状态管理

#### 2.1 游戏状态分类

**线性/剧情游戏：**

- 未开始
- 游玩中
- 已通关
- n 周目标记（支持多周目记录）

**可重玩/网络游戏：**

- 未开始
- 游玩中
- 暂时搁置
- 彻底不玩
- 多人游戏（单独分类）

#### 2.2 批量状态更新

**自动标记规则：**

- 游玩时长为 0 → 自动标记为"未开始"
- 游玩时长超过平均通关时长且长期未玩 → 询问用户确认状态

**AI 辅助标记：**

- 结合游戏类型、时长比例、最后游玩时间、成就完成度
- 提供智能推荐，用户确认后批量更新

#### 2.3 手动管理

- 游戏库列表页面快速切换状态
- 支持批量选择和状态修改
- 长按进入多选模式

### 3. 数据集成

#### 3.1 Steam API 集成

- 获取用户游戏库列表
- 读取游戏时长和最后游玩时间
- 获取成就完成情况
- 读取基础游戏信息

#### 3.2 IGDB 数据补充

- 获取详细游戏元数据（类型、标签、封面图）
- 补充发行商、开发商信息
- 获取游戏评分和发布信息

#### 3.3 游戏时长数据

- 内置热门游戏完成时长数据库
- 基于游戏类型的时长预估算法
- 支持用户手动输入自定义时长

## 技术规格

### 平台要求

- **目标平台**：Android
- **设计规范**：Material Design 3 (M3)
- **开发框架**：Flutter
- **架构模式**：纯客户端应用，无后端依赖

### 数据存储

- **本地数据库**：SQLite (sqflite)
- **配置存储**：SharedPreferences
- **数据范围**：用户游戏状态、API 配置、缓存的游戏元数据

### API 依赖

- Steam Web API（用户提供 API Key）
- IGDB API（应用内集成）
- 所有 API 调用均在客户端完成

## 用户界面设计

### 应用架构

```
Bottom Navigation (3个Tab):
├── 🎲 发现页 - 推荐核心功能
├── 📚 游戏库 - 状态管理
└── ⚙️ 设置 - 配置统计
```

### 首次启动引导

1. **欢迎页**：产品介绍和价值说明
2. **Steam 连接说明**：数据使用和隐私说明
3. **API Key 获取引导**：分步骤指导获取 Steam API Key
4. **Steam ID 获取**：支持用户名自动检测和手动输入
5. **数据同步**：游戏库数据获取和处理进度
6. **快速标记引导**：AI 辅助的批量状态标记

### 核心页面设计

#### 发现页

- **Hero 区域**：主推荐游戏大卡片（封面图、名称、类型、时长、操作按钮）
- **备选区域**：横向滚动的小卡片推荐列表
- **筛选区域**：Filter Chips 快速筛选选项
- **交互**：支持左右滑动手势操作

#### 游戏库页

- **顶部**：搜索栏 + 状态筛选 Chips
- **列表**：游戏缩略图 + 信息 + 快速状态切换
- **批量操作**：FAB 展开批量标记选项

#### 设置页

- Steam 连接状态管理
- 推荐偏好配置
- 数据统计展示
- 应用信息和帮助

### 交互特性

- **手势操作**：滑动切换推荐、长按多选
- **动画效果**：M3 规范的过渡动画和状态变化
- **响应式设计**：适配手机、平板、折叠屏设备

## 用户体验要求

### 性能要求

- 应用启动时间 < 3 秒
- 推荐生成响应时间 < 1 秒
- 游戏库同步支持后台处理和进度显示

### 可用性要求

- 支持深浅主题切换
- 完整的错误处理和用户反馈
- 离线状态下的基础功能可用
- 清晰的帮助文档和操作指引

### 数据安全

- 所有数据仅存储在本地设备
- 用户可随时清除所有应用数据
- 透明的数据使用说明

## 后续扩展可能

### 分享功能

- 生成年度游戏总结静态图片
- 当前游玩游戏状态分享
- 游戏库统计信息展示

### 高级推荐

- 基于游玩历史的深度学习推荐
- 季节性和节日主题推荐
- 朋友游戏状态参考（如果 Steam 好友数据可获取）

---

**项目优先级**：首次启动引导 > 基础推荐功能 > 状态管理 > 高级筛选 > 扩展功能
